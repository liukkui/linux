
网络协议和管理

网络概念：
OSI模型：
网络设备：
TCP/IP: -TCP&UDP区别 -TCP首部 -TCP的三次握手和四次挥手 
配置网络
实现网路组
测试网络
网络工具


网际层协议：包括：IP协议、ICMP协议、ARP协议、RARP协议.
传输层协议：TCP协议、UDP协议.
应用层协议：FTP、Telnet、SMTP、HTTP、RIP、NFS、DNS等.

1.网络概念：  
    位和字节的区别，1Gbps、100Mbps都是以位为单位的，10M/s是以字节为单位的  
    网络拓扑等  
2.OSI模型：  
    >七层模型：  
    application、persention、session、transport、network、data-link、physical  
    7.应用层： 提供各种程序的界面，浏览器，通信软件等   
    6.表示层： 数据的表达：ascii,utf-8,加密解密，压缩解压缩等  
    5.会话层： 建立、管理主机之间的会话  
    4.传输层：   数据报文格式：单位：段segent，建立终端到终端的通信-保证数据可靠性传输-tcp协议等  
    3.网络层:   单位：包、报文package,记录逻辑地址：ip，路由、等-支持逻辑寻址、数据传输的路径选择  
    2.数据链路层： 单位：帧,将物理层传上来的0,1进行组合并格式化组成   -帧frame-记录目标地址和源地址 (物理地址：mac)-检查数据报文的错误等. -链路间的通信  
    1.物理层：   单位：比特bit,将各种网络设备进行物理层的确保按规范进行链接保证正常通讯,即只要0和1.   -形成比特流  

通信过程  
a.发送端进行封装、接收端进行解封装、  
  层层封装：数据+应用层报头+TCP/UDP报头+IP报头+帧头部=物理层的0101  
b.解封装的过程：  
  下层协议为上层协议提供服务：因为上层有各种协议，所以在向上传递时，会有标记来体现出上层协议的类型  
  层层解封装：物理层的0101=数据+应用层报头+TCP/UDP报头+IP报头+帧头部 
   所谓的丢包：是指发生在网络层
c.数据位bit、数据帧frame、数据包packet、数据段segent、其它层都是message -都统称为PDU-协议数据单元是指对等层次之间传递的数据单位


三种通讯方式：

单播：unicast
    目标发送报文时，目标地址是网络中的一个设备，称为单播
广播：broadcast
    目标发送报文时，目标地址是一定范围内网络中的所有设备，称为广播
组播：multicast
    目标发送报文时，目标地址是网络中的部分主机设备，称为多播或组播

局域网：LAN：Local Area Netwoek 本地区域网络 -基础广播机制进行通讯
广域网：wan：Wdie  Area Netwoek -基于点对点进行通讯

非屏蔽式双绞线-UTP

T568B：橙白 橙 绿白 蓝 蓝白 绿白 棕白 棕 -最大程度上抵消彼此的电磁干扰
      低于100M时，一般用12/36两组 高于100M时，一般同种颜色的绞合在一起-直连线
T568A
      单独两台电脑直连时用T568A
      100M以内时，1 2 TX+接收 3 6 RX+发送 13、26对调既可 一边按T568B做，一边按T568A做叫交叉线
      新设备自动识别直连线或者交叉线


单工：单向传输 -百兆以内
半双工：一个时间只能单向传输
全双工：可以同时传输和接收 -千兆以上-单模（激光）-多模光纤


以太网： -工作在数据链路层
   不仅仅可以把网络连接起来，还规定了数据帧的报文结构
   有限以太网和无线以太网wifi

-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------

数据链路层协议之以太网帧结构

以太网帧结构：固定长度是(8+6+6+2=22)
   
    Preamble Destination  Source  Type   Data   FCS

    前导信息  目标地址      源地址  type   Data    FCS

字节：  8         6           6      2   46-1500   4

1.前导信息：网卡传输时，标记以太网帧的开始
2.FCS:校验位，如果数据错误，网卡会把数据直接扔掉
3.以太网帧的最长长度：72-1526字节
  除去前导信息和FCS则是用户关心的有效信息：60-1514字节 -即各种抓包软件抓取的有效字节数

Destination:6个字节，48位，2^48个物理地址（mac）
Source:6个字节，48位，2^48个物理地址（mac）
Type：体现上层协议的类型
Data:包含上层网络层、传输层、应用层的头部信息+data数据信息

抓包：wireshark，指定要抓的网卡
tcpdump -i eth0 -nn -X  -指定网卡显示数字二进制信息 捕获到达该网卡的所有数据包


CSMA/CD 冲突检测的载波侦听多路访问
冲突域：一个主机发送报文，另一主机也发送报文，产生冲突，两个主机在一个冲突域
广播域：一个主机发送广播，另一主机收到，两个主机在一个广播域  -广播泛洪
网桥/交换机能隔断冲突域但不能隔断广播域

网桥/以太网桥的工作原理
1.具有转发功能，所有不能隔断广播域
2.交换机有镜像端口
3.主机都连到交换机的一个端口，有效隔断冲突域
4.网桥和交换机内部有写在内存中
    交换机/网桥会读取数据报文中的源地址和目标地址，而交换机有具有学习功能
    则将数据报文中的源地址mac -内存中记录接口和MAC的对应关系
  而记录在内存中的是主机的mac地址，而不是广播地址，因为广播地址的mac地址表现为6*8-48个1，不会存在内存表中
   a. a->b 进行通讯，则内存中会记录macA和B与对应的交换机端口，第二次通讯则不会影响其他主机
   b. 所以如果A发一个广播，广播的mac地址则不会存在交换机内存中，其他主机都能收到，即广播泛洪

路由器： -网络层的设备

vlan：
trunk协议:
  多个交换机是通过trunk干线相连，而trunk干线不属于任何vlan，属于公共干线
  不同vlan的主机如果要通讯，在通过trunk干线的瞬间，修改数据报文结构，在标准的以太网帧内加上一段记录vlan信息的数据，传给下一个交换机.
  

-----------------------------------------------------------------------------------
-----------------------------------------------------------------------------------add default gw 192.18.0.200

